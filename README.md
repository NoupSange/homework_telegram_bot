# Homework_telegram_bot ![Telegram](https://img.shields.io/badge/Telegram-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white)
### Описание
Телеграм бот на Python библиотеке ![Static Badge](https://img.shields.io/badge/telebot-%230088CC).
Также используются библиотеки ![Static Badge](https://img.shields.io/badge/dotenv-yellow), ![Static Badge](https://img.shields.io/badge/requests-yellow), ![Static Badge](https://img.shields.io/badge/logging-yellow) и другие.

Работа бота:
- раз в 10 минут опрашивает API сервиса Практикум Домашка и проверяет статус отправленной на ревью домашней работы;
- при обновлении статуса анализировует ответ API и отправляет вам соответствующее **уведомление в Telegram**;
- **логировует** свою работу и сообщает вам о важных проблемах **сообщением в Telegram**.

## Логика кода
1. Функция ![Static Badge](https://img.shields.io/badge/main()-white) — в ней описана основная логика работы программы. Все остальные функции должны запускаться из неё. Последовательность действий в общем виде должна быть примерно такой:
2. Сделать запрос к API.
3. Проверить ответ.
4. Если есть обновления — получить статус работы из обновления и отправить сообщение в Telegram.
Подождать некоторое время и вернуться в пункт 1.
- Функция ![Static Badge](https://img.shields.io/badge/check_tokens()-white) проверяет доступность переменных окружения, которые необходимы для работы программы. Если отсутствует хотя бы одна переменная окружения — продолжать работу бота нет смысла.
- Функция ![Static Badge](https://img.shields.io/badge/get_api_answer()-white) делает запрос к единственному эндпоинту API-сервиса. В качестве параметра в функцию передаётся временная метка. В случае успешного запроса должна вернуть ответ API, приведя его из формата JSON к типам данных Python.
- Функция ![Static Badge](https://img.shields.io/badge/check_response()-white) проверяет ответ API на соответствие документации из урока «API сервиса Практикум Домашка». В качестве параметра функция получает ответ API, приведённый к типам данных Python.
- Функция ![Static Badge](https://img.shields.io/badge/parse_status()-white)  извлекает из информации о конкретной домашней работе статус этой работы. В качестве параметра функция получает только один элемент из списка домашних работ. В случае успеха функция возвращает подготовленную для отправки в Telegram строку, содержащую один из вердиктов словаря HOMEWORK_VERDICTS.
- Функция ![Static Badge](https://img.shields.io/badge/send_message()-white) отправляет сообщение в Telegram-чат, определяемый переменной окружения TELEGRAM_CHAT_ID. Принимает на вход два параметра: экземпляр класса TeleBot и строку с текстом сообщения.

## Логирование
Логированы следующие события: 
- отсутствие обязательных переменных окружения во время запуска бота (уровень CRITICAL);
удачная отправка любого сообщения в Telegram (уровень DEBUG);
сбой при отправке сообщения в Telegram (уровень ERROR);
- недоступность эндпоинта https://practicum.yandex.ru/api/user_api/homework_statuses/ (уровень ERROR);
любые другие сбои при запросе к эндпоинту (уровень ERROR);
- отсутствие ожидаемых ключей в ответе API (уровень ERROR);
неожиданный статус домашней работы, обнаруженный в ответе API (уровень ERROR);
- отсутствие в ответе новых статусов (уровень DEBUG).

Логи выводятся в файл main.log.

Пример:
```
...
2025-08-14 15:46:55,611 [ERROR] Код ответа: 401, причина: Unauthorized
2025-08-14 15:46:55,611 [DEBUG] Отправка сообщения...
2025-08-14 15:46:55,618 [DEBUG] Starting new HTTPS connection (1): api.telegram.org:443
...
```
